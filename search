<h1>search result</h1>

<h3 id="stores_header">Stores, Shops, and Services</h3>
<div id="search_container_stores" class="store_list_padding search_result">
    <script id="search_template_stores" type="x-tmpl-mustache/text">
        <a href="/stores/{{slug}}">{{name}}</a>
        <p>{{description}}</p>
    </script>
</div>


<h3 id="promotions_header">Upcoming Promotions</h3>    
<div id="search_container_promotions" class="store_list_padding search_result">
    <script id="search_template_promotions" type="x-tmpl-mustache/text">
        <a href="/promotions/{{slug}}">{{name}}</a>
        <p>{{description}}</p>
      
    </script>
</div>
<h3 id="events_header">Upcoming Events</h3>    
<div id="search_container_events"  class="store_list_padding search_result">
    <script id="search_template_events" type="x-tmpl-mustache/text">
        <a href="/events/{{slug}}">{{name}}</a>
        <p>{{description}}</p>
    </script>
</div>



    <h3 id="jobs_header">Career Opportunities</h3>    

        <div class="store_list_padding search_result">
            <a href="/jobs/{{item.slug}}">{{item.name}}</a>
            <p>{{item.description | strip_html | truncatewords: 35}}</p>
        </div>    


{% assign page_query = result_query["page"] | size %}
{% if page_query > 0 %}
    <h3>Generial Information</h3>    
    {% for item in result_query["page"] %}
        <div class="store_list_padding search_result">
            <a href="/pages/{{item.slug}}">{{item.title}}</a>
            <p>{{item.body | strip_html | truncatewords: 35}}</p>
        </div>    
    {% endfor %}
{% endif %}

<script>
    $(document).ready(function(e){
        init(e);
        function renderAll(){
            init_home_hours();
            var params = getRequestParam('query');
            var search_results = getSearchResults(params,10,100);
            if (search_results.stores != undefined && search_results.stores.length > 0){
                renderGeneral('#search_container_stores','#search_template_stores', search_results.stores);
            }
            else{
                $('#stores_header').hide()
            }
            if (search_results.promotions != undefined && search_results.promotions.length > 0){
                renderGeneral('#search_container_promotions','#search_template_promotions', search_results.promotions);
            }
            else{
                $('#promotions_header').hide()
            }
            if (search_results.events != undefined &&  search_results.events.length > 0){
                renderGeneral('#search_container_events','#search_template_events', search_results.events);
            }
            else{
                $('#events_header').hide()
            }
            if (search_results.jobs != undefined &&  search_results.jobs.length > 0){
                renderGeneral('#search_container_events','#search_template_events', search_results.jobs);
            }
            else{
                $('#events_header').hide()
            }
            show_content();
        }
        loadMallDataCached(renderAll); 
    })
</script>